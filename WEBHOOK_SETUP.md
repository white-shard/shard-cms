# Настройка вебхуков для форм

## Обзор

Система автоматически отправляет данные из форм на указанный вебхук URL при отправке формы.

## Как это работает

1. Пользователь заполняет форму на сайте
2. Форма отправляется на `/api/forms/submit`
3. API получает форму из базы данных
4. Если у формы указан webhook URL, данные отправляются туда
5. Возвращается результат отправки

## Настройка вебхука

### В админ-панели Payload

1. Перейдите в раздел "Формы"
2. Создайте или отредактируйте форму
3. В поле "Вебхук / Webhook" укажите URL для отправки данных
4. Сохраните форму

### Формат данных

Данные отправляются как `FormData` с полями:

- `form_id` - ID формы
- Все поля формы с их значениями

### Пример вебхука

```javascript
// Пример обработчика вебхука (Node.js/Express)
app.post("/webhook", (req, res) => {
  const formData = req.body

  console.log("Получены данные формы:", formData)

  // Обработка данных
  const formId = formData.form_id
  const name = formData.name
  const email = formData.email
  const message = formData.message

  // Отправка в CRM, базу данных, email и т.д.

  res.json({ success: true })
})
```

## Тестирование

1. Создайте тестовый вебхук (например, через webhook.site)
2. Укажите URL в настройках формы
3. Заполните и отправьте форму
4. Проверьте получение данных на вебхуке

## Обработка ошибок

- Если вебхук недоступен, форма вернет ошибку
- Проверьте логи сервера для диагностики
- Убедитесь, что вебхук принимает POST запросы

## Безопасность

- Используйте HTTPS для вебхуков
- Проверяйте источник запросов
- Валидируйте полученные данные
- Ограничьте доступ к вебхуку
